
<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="alrem.js" type="text/javascript" charset="utf-8"></script>
		<script src="jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="jquery.base64.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			.box {
				padding: 0.1rem;
				display: flex;
				flex-direction: row;
				flex-wrap: wrap;
			}

			.box div {
				width: 30%;
				text-align: center;
				line-height: 0.5rem;
				font-size: 0.14rem;
				background: #eee;
				margin: 0.1rem 0.05rem;
			}

			.content_box {
				margin: 0.2rem 0 0 0;
				line-height: 0.25rem;
				padding: 0.1rem;
				font-size: 0.14rem;
			}

			.content_box #content {
				border: 1px solid #eee;
				line-height: 0.25rem;
				width: 100%;
				min-height: 2rem;
				word-break: break-all;
				max-height: 4rem;
				overflow: scroll;
			}
		</style>
	</head>

	<body>
		<div class="box">
			<div class="login_user" id="enter1">获取照片</div>
			<div class="login_fall" id="enter2">获取token</div>
			<div class="use_camera" id="enter3">登录失效</div>
			<div class="use_share" id="enter4">显示加载框</div>
			<div class="use_share" id="enter5">隐藏加载框</div>
			<div class="use_share" id="enter6">加载失败</div>
			<div class="use_share" id="enter7">显示无网络</div>
			<div class="use_share" id="enter8">调用分享</div>
            <div class="use_share" id="enter9">OCR识别身份证</div>
		</div>
		<div class="content_box">
			<div>日志</div>
			<div id="content">

			</div>
		</div>
		<img src="" id="img" alt="" style="height: 1rem;width: 1rem;border: 1px solid #eee;" />
		<script>
				console.log(jQuery.base64.encode('eGlhb21hYnVoZWk='))
		</script>
		<script>


			function setupWebViewJavascriptBridge(callback) {
				if(window.WebViewJavascriptBridge) {
					callback(WebViewJavascriptBridge)
				} else {
					document.addEventListener(
						'WebViewJavascriptBridgeReady',
						function() {
							callback(WebViewJavascriptBridge)
						},
						false
					);
				}

				if(window.WVJBCallbacks) {
					return window.WVJBCallbacks.push(callback);
				}
				window.WVJBCallbacks = [callback];
				var WVJBIframe = document.createElement('iframe');
				WVJBIframe.style.display = 'none';
				WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
				document.documentElement.appendChild(WVJBIframe);
				setTimeout(function() {
					document.documentElement.removeChild(WVJBIframe)
				}, 0)
			}

			setupWebViewJavascriptBridge(function(bridge) {
				//注册原生调起方法
				//参数1： buttonjs 注册flag 供原生使用，要和原生统一
				//参数2： data  是原生传给js 的数据
				//参数3： responseCallback 是js 的回调，可以通过该方法给原生传数据
				bridge.registerHandler("webReCall", function(data, responseCallback) {

					document.getElementById("content").innerHTML = data;
					responseCallback("button js callback");
				});

			})

			document.getElementById('enter1').onclick = function(e) {
				var data = {
					'action': 'jsNGetPhoto',
					'needCallBack': '',
					'message': '',
					'parameter': {
						'scale': '0.5,1.0',
					}
				}
				window.WebViewJavascriptBridge.callHandler('nativeListener', data, function(resp) {
					var list=JSON.parse(resp)
					document.getElementById("content").innerHTML = list.msg;


					document.getElementById('img').setAttribute('src','data:image/jpeg;base64,'+list.data.img)
				});
			}
			document.getElementById('enter2').onclick = function(e) {
				var data = {
					'action': 'jsNGetToken',
					'needCallBack': '',
					'message': '',
					"parameter":{
						"business":"存钱业务"
						}
				}
				window.WebViewJavascriptBridge.callHandler('nativeListener', data, function(resp) {
					var list=JSON.parse(resp)
					document.getElementById("content").innerHTML = list.msg + 'TOKEN :'+ list.data.token;

				});
			}
			document.getElementById('enter3').onclick = function(e) {
				var data = {
					'action': 'jsNInvalidLogin',
					'needCallBack': '',
					'message': '',
					'parameter': {
						'state': '',
						'alert': ''
					}
				}
				window.WebViewJavascriptBridge.callHandler('nativeListener', data, function(resp) {
					var list=JSON.parse(resp)
					document.getElementById("content").innerHTML = list.data.msg;
				});
			}
			document.getElementById('enter4').onclick = function(e) {
				var data = {
					'action': 'jsNShowLoading',
					'needCallBack': '',
					'message': '',
					'parameter': {
						'state': '',
						'alert': ''
					}
				}
				window.WebViewJavascriptBridge.callHandler('nativeListener', data, function(resp) {
					var list=JSON.parse(resp)
					document.getElementById("content").innerHTML = list.data.msg;
				});
			}
			document.getElementById('enter5').onclick = function(e) {
				var data = {
					'action': 'jsNDismissLoading',
					'needCallBack': '',
					'message': '',
					'parameter': {
						'state': '',
						'alert': ''
					}
				}
				window.WebViewJavascriptBridge.callHandler('nativeListener', data, function(resp) {
					var list=JSON.parse(resp)
					document.getElementById("content").innerHTML = list.data.msg;
				});
			}
			document.getElementById('enter6').onclick = function(e) {
				var data = {
					'action': 'jsNShowLoadFailed',
					'needCallBack': '',
					'message': '',
					'parameter': {
						'state': '',
						'alert': ''
					}
				}
				window.WebViewJavascriptBridge.callHandler('nativeListener', data, function(resp) {
					var list=JSON.parse(resp)
					document.getElementById("content").innerHTML = list.data.msg;
				});
			}
			document.getElementById('enter7').onclick = function(e) {
				var data = {
					'action': 'jsNShowNoNetwork',
					'needCallBack': '',
					'message': '',
					'parameter': {
						'state': '',
						'alert': ''
					}
				}
				window.WebViewJavascriptBridge.callHandler('nativeListener', data, function(resp) {
					var list=JSON.parse(resp)
					document.getElementById("content").innerHTML = list.data.msg;
				});
			}
			document.getElementById('enter8').onclick = function(e) {
				var data = {
					'action': 'jsNShareWeb',
					'needCallBack': '',
					'message': '',
					'parameter': {
						"shareUrl":"http://www.baidu.com",
						"shareContext":"shareContext",
						"shareTitle":"shareTitle",
						"imgUrl":"",
					}
				}
				window.WebViewJavascriptBridge.callHandler('nativeListener', data, function(resp) {
					var list=JSON.parse(resp)
					document.getElementById("content").innerHTML = list.data.msg;
				});

			}
			document.getElementById('enter9').onclick = function(e) {
				var data = {
					'action': 'jsNGetIDCard',
					'needCallBack': '1',
					'message': '',
					'parameter': {
					}
				}
				window.WebViewJavascriptBridge.callHandler('nativeListener', data, function(resp) {
                    var list=JSON.parse(resp)
                                                           document.getElementById('img').setAttribute('src','data:image/jpeg;base64,'+list.data.img)
                                                           var info = list;
                                                           info.data.img = "太长了不在这里展示了，图片base64就是这个字段";
                                                           var result = JSON.stringify(info);
                                                           document.getElementById("content").innerHTML =result;
                });

			}
		</script>


	</body>

</html>
